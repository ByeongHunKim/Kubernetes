# k8s 에서 데이터를 영구적으로 저장하는 메커니즘 - persistent storage

- 스토리지 관리는 K8s 클러스터 내에 있는 컴퓨트 노드(인스턴스) 관리와는 별개의 문제이다. 외부 별도의 스토리지 시스템을 이용해 데이터를 저장할 수도 있고 클러스터 내 노드의 자원을 사용할 수도 있다. k8s에서는 Persistent Storage를 통해서 클러스터 개발자 및 관리자에게 스토리지 사용 방법 및 스토리지 제공 방법에 대한 추상화된 API를 제공한다.

## 주요 오브젝트

### Persistent Volume ( PV )
- PV는 관리자가 프로비저닝 하거나 Storage Class를 사용해서 동적으로 프로비저닝한 클러스터의 스토리지이다.
- Pod에 노드의 CPU, Memory 같은 클러스터 리소스를 요청하는 것 처럼 PV도 클러스터 리소스의 일종이다.
- 일반적인 Volume은 Pod와 동일한 라이프사이클을 가지지만, PV는 리소스를 사용하는 Pod와 별개의 라이프사이클을 가진다.
- 따라서 Pod가 종료되어도 PV에 기록된 데이터는 삭제되지 않고 남아 있다

### Persistent Volume Claim ( PVC )
- PV가 클러스터 내 노드들이 CPU, Memory 와 마찬가지로 클러스터 리소스하고 했는데, PVC 는 해당 리소스에 대한 요청이며